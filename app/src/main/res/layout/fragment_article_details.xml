<?xml version="1.0" encoding="utf-8"?>
<layout
    xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    xmlns:tools="http://schemas.android.com/tools">

    <androidx.coordinatorlayout.widget.CoordinatorLayout
        android:id="@+id/details_coordinator_layout"
        style="@style/Widget.Support.CoordinatorLayout"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:fitsSystemWindows="true"
        tools:context=".ui.details.DetailsActivity">

        <!-- Note: To add a collapsing toolbar to your layout, place
        the CollapsingToolbarLayout inside an AppBarLayout. Then, add
        a Toolbar and any other views as a child to the collapsing
        toolbar layout. You can add as many views as you like to the
        CollapsingToolbarLayout, but make sure that the Toolbar is
        the last child of the CollapsingToolbarLayout. This ensures
        that the views are drawn in the correct order. Also make sure
        that the entire view structure is inside a CoordinatorLayout
        to take advantage of the CollapsingToolbarLayoutâ€™s features.
        https://material.io/develop/android/components/collapsing-toolbar-layout/ -->
        <com.google.android.material.appbar.AppBarLayout
            android:id="@+id/details_app_bar"
            android:layout_width="match_parent"
            android:layout_height="@dimen/details_toolbar_height"
            android:fitsSystemWindows="true"
            android:theme="@style/AppBarOverlay">

            <!-- A toolbar with a collapsing image -->
            <com.google.android.material.appbar.CollapsingToolbarLayout
                android:id="@+id/details_collapsing_toolbar"
                android:layout_width="match_parent"
                android:layout_height="match_parent"
                android:fitsSystemWindows="true"
                app:expandedTitleMarginEnd="@dimen/details_collapsing_toolbar_title_margin"
                app:expandedTitleMarginStart="@dimen/details_collapsing_toolbar_title_margin"
                app:layout_scrollFlags="scroll|exitUntilCollapsed">

                <ImageView
                    android:id="@+id/details_article_photo"
                    android:layout_width="match_parent"
                    android:layout_height="match_parent"
                    android:contentDescription="@string/article_photo_content_description"
                    android:fitsSystemWindows="true"
                    android:scaleType="centerCrop"
                    app:layout_collapseMode="parallax"
                    tools:src="@tools:sample/backgrounds/scenic" />

                <androidx.appcompat.widget.Toolbar
                    android:id="@+id/details_toolbar"
                    android:layout_width="match_parent"
                    android:layout_height="?attr/actionBarSize"
                    app:layout_collapseMode="pin"
                    app:popupTheme="@style/PopupOverlay" />

            </com.google.android.material.appbar.CollapsingToolbarLayout>
        </com.google.android.material.appbar.AppBarLayout>

        <!-- Note: we need to define an association between the AppBarLayout
        and the View that will be scrolled. Add an app:layout_behavior to a
        RecyclerView or any other View capable of nested scrolling such as
        NestedScrollView. The support library contains a special string
        resource, @string/appbar_scrolling_view_behavior, that maps to
        AppBarLayout.ScrollingViewBehavior, which is used to notify the
        AppBarLayout when scroll events occur on this particular view. The
        behavior must be established on the view that triggers the event. See:
        https://guides.codepath.com/android/Handling-Scrolls-with-CoordinatorLayout -->
        <androidx.core.widget.NestedScrollView
            android:id="@+id/details_nested_scroll_view"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:clipToPadding="false"
            android:paddingBottom="16dp"
            app:layout_behavior="@string/appbar_scrolling_view_behavior">

            <RelativeLayout
                android:layout_width="match_parent"
                android:layout_height="wrap_content">

                <LinearLayout
                    android:id="@+id/meta_bar"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:layout_marginBottom="@dimen/details_metabar_vertical_margin"
                    android:layout_gravity="bottom"
                    android:orientation="vertical"
                    android:paddingLeft="@dimen/details_inner_horizontal_margin"
                    android:paddingTop="@dimen/details_metabar_vertical_padding"
                    android:paddingRight="@dimen/details_inner_horizontal_margin"
                    android:paddingBottom="@dimen/details_metabar_vertical_padding"
                    android:background="@color/colorPrimary">

                    <TextView
                        android:id="@+id/article_title"
                        android:layout_width="match_parent"
                        android:layout_height="wrap_content"
                        android:paddingBottom="@dimen/details_metabar_title_bottom_padding"
                        android:textAppearance="@style/TextAppearance.MaterialComponents.Headline6"
                        android:textStyle="bold"
                        tools:text="Ebooks, Neither E, Nor Books"
                        android:textColor="@android:color/white"/>

                    <TextView
                        android:id="@+id/article_byline"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:textAppearance="@style/TextAppearance.MaterialComponents.Caption"
                        tools:text="Cory Doctorow"
                        android:textColor="@android:color/white"/>
                </LinearLayout>

                <com.google.android.material.floatingactionbutton.FloatingActionButton
                    android:id="@+id/share_fab"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_alignParentEnd="true"
                    android:layout_below="@+id/meta_bar"
                    android:layout_marginEnd="@dimen/details_fab_margin_end"
                    android:layout_marginTop="@dimen/details_fab_margin_top"
                    android:contentDescription="@string/action_share"
                    android:src="@drawable/ic_share_white_24dp"
                    app:backgroundTint="@color/colorAccent"
                    app:borderWidth="0dp"
                    app:elevation="@dimen/details_fab_elevation"
                    app:fabSize="normal"/>

                <TextView
                    android:id="@+id/article_body"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:layout_marginLeft="@dimen/details_inner_horizontal_margin"
                    android:layout_marginRight="@dimen/details_inner_horizontal_margin"
                    android:layout_below="@+id/share_fab"
                    android:textColorLink="@color/colorAccent"
                    android:textAppearance="@style/TextAppearance.MaterialComponents.Body1"
                    tools:text="@tools:sample/lorem/random" />

                <Button
                    android:id="@+id/read_more_button"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_below="@+id/article_body"
                    android:layout_centerHorizontal="true"
                    android:layout_marginBottom="16dp"
                    android:layout_marginEnd="@dimen/details_inner_horizontal_margin"
                    android:layout_marginStart="@dimen/details_inner_horizontal_margin"
                    android:paddingStart="@dimen/details_read_more_btn_padding"
                    android:paddingEnd="@dimen/details_read_more_btn_padding"
                    android:layout_marginTop="16dp"
                    android:text="@string/read_more"
                    android:textColor="@android:color/white"
                    android:background="@color/colorAccent"
                    android:visibility="visible"/>
            </RelativeLayout>
        </androidx.core.widget.NestedScrollView>

    </androidx.coordinatorlayout.widget.CoordinatorLayout>
</layout>